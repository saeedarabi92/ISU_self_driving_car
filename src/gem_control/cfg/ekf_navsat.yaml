# [  x,    y,     z, 
  # roll, pitch,   yaw,
  #  vx,   vy,     vz, 
  # vroll, vpitch, vyaw,
  #   ax,   ay,    az]
  
ekf_local:
  frequency: 50
  sensor_timeout: 0.1
  two_d_mode: true
  transform_time_offset: 0.1 #0.05
  print_diagnostics: true
  debug: false
  predict_to_current_time: true
  map_frame: map
  odom_frame: odom
  base_link_frame: base_footprint
  world_frame: odom

  odom0: /odometry/gps
  odom0_config: [true,  true,  true,
                false, false, false,
                false, false, false,
                false, false, false,
                false, false, false]

  odom0_queue_size: 0
  odom0_nodelay: false
  odom0_differential: false
  odom0_relative: false


  odom1: /odom
  odom1_config: [false, false, false,
                 false, false, true,
                 true, true, false,
                 false, false, true,
                 false, false, false]


  odom1_queue_size: 0
  odom1_nodelay: false
  odom1_differential: false
  odom1_relative: false


  imu0: /imu
  imu0_config: [false, false, false,
               false, false, true,
               true, true, false,
               false, false, true,
               false, false, false]

  imu0_queue_size: 0
  imu0_nodelay: false
  imu0_differential: false
  imu0_relative: false
  imu0_remove_gravitational_acceleration: true

  use_control: false
  control_timeout: 0.2
  # Which velocities are being controlled. Order is vx, vy, vz, vroll, vpitch, vyaw.
  control_config: [true, false, false, false, false, true]
  # Places limits on how large the acceleration term will be. Should match your robot's kinematics.
  acceleration_limits: [1.3, 0.0, 0.0, 0.0, 0.0, 3.4]
  # Acceleration and deceleration limits are not always the same for robots.
  deceleration_limits: [1.3, 0.0, 0.0, 0.0, 0.0, 4.5]
  # If your robot cannot instantaneously reach its acceleration limit, the permitted change can be controlled with these
  # gains
  acceleration_gains: [0.8, 0.0, 0.0, 0.0, 0.0, 0.9]
  # If your robot cannot instantaneously reach its deceleration limit, the permitted change can be controlled with these
  # gains
  deceleration_gains: [1.0, 0.0, 0.0, 0.0, 0.0, 1.0]

  process_noise_covariance: [0.05, 0,    0,    0,    0,    0,    0,     0,     0,    0,    0,    0,    0,    0,    0,
                             0,    0.05, 0,    0,    0,    0,    0,     0,     0,    0,    0,    0,    0,    0,    0,
                             0,    0,    0.06, 0,    0,    0,    0,     0,     0,    0,    0,    0,    0,    0,    0,
                             0,    0,    0,    0.03, 0,    0,    0,     0,     0,    0,    0,    0,    0,    0,    0,
                             0,    0,    0,    0,    0.03, 0,    0,     0,     0,    0,    0,    0,    0,    0,    0,
                             0,    0,    0,    0,    0,    0.06, 0,     0,     0,    0,    0,    0,    0,    0,    0,
                             0,    0,    0,    0,    0,    0,    0.025, 0,     0,    0,    0,    0,    0,    0,    0,
                             0,    0,    0,    0,    0,    0,    0,     0.025, 0,    0,    0,    0,    0,    0,    0,
                             0,    0,    0,    0,    0,    0,    0,     0,     0.04, 0,    0,    0,    0,    0,    0,
                             0,    0,    0,    0,    0,    0,    0,     0,     0,    0.01, 0,    0,    0,    0,    0,
                             0,    0,    0,    0,    0,    0,    0,     0,     0,    0,    0.01, 0,    0,    0,    0,
                             0,    0,    0,    0,    0,    0,    0,     0,     0,    0,    0,    0.02, 0,    0,    0,
                             0,    0,    0,    0,    0,    0,    0,     0,     0,    0,    0,    0,    0.01, 0,    0,
                             0,    0,    0,    0,    0,    0,    0,     0,     0,    0,    0,    0,    0,    0.01, 0,
                             0,    0,    0,    0,    0,    0,    0,     0,     0,    0,    0,    0,    0,    0,    0.015]

initial_estimate_covariance: [1e-6, 0,    0,    0,    0,    0,    0,    0,    0,    0,     0,     0,     0,    0,    0,
                              0,    1e-6, 0,    0,    0,    0,    0,    0,    0,    0,     0,     0,     0,    0,    0,
                              0,    0,    1e-9, 0,    0,    0,    0,    0,    0,    0,     0,     0,     0,    0,    0,
                              0,    0,    0,    1e-9, 0,    0,    0,    0,    0,    0,     0,     0,     0,    0,    0,
                              0,    0,    0,    0,    1e-9, 0,    0,    0,    0,    0,     0,     0,     0,    0,    0,
                              0,    0,    0,    0,    0,    1e-3, 0,    0,    0,    0,     0,     0,     0,    0,    0,
                              0,    0,    0,    0,    0,    0,    1e-9, 0,    0,    0,     0,     0,     0,    0,    0,
                              0,    0,    0,    0,    0,    0,    0,    1e-9, 0,    0,     0,     0,     0,    0,    0,
                              0,    0,    0,    0,    0,    0,    0,    0,    1e-9, 0,     0,     0,     0,    0,    0,
                              0,    0,    0,    0,    0,    0,    0,    0,    0,    1e-9,  0,     0,     0,    0,    0,
                              0,    0,    0,    0,    0,    0,    0,    0,    0,    0,     1e-9,  0,     0,    0,    0,
                              0,    0,    0,    0,    0,    0,    0,    0,    0,    0,     0,     1e-9,  0,    0,    0,
                              0,    0,    0,    0,    0,    0,    0,    0,    0,    0,     0,     0,     1e-9, 0,    0,
                              0,    0,    0,    0,    0,    0,    0,    0,    0,    0,     0,     0,     0,    1e-9, 0,
                              0,    0,    0,    0,    0,    0,    0,    0,    0,    0,     0,     0,     0,    0,    1e-9]


navsat_transform:
  frequency: 50
  delay: 3.0
  magnetic_declination_radians: 0.0 #0.0429351  # For lat/long 55.944831, -3.186998
  yaw_offset: 0.0 # 1.570796327 IMU reads 0 facing magnetic north, not east
  zero_altitude: true
  broadcast_cartesian_transform: false
  publish_filtered_gps: true
  use_odometry_yaw: true
  wait_for_datum: true

