<launch>

<node pkg="tf2_ros" type="static_transform_publisher" name="map_odom" args="0 0 0 0 0 0 map odom" /> 


  <!-- Load parameters for dual EKF + navsat_transform nodes -->
  <rosparam command="load" file="$(find gem_control)/cfg/ekf_navsat.yaml" />

  <!-- Launch local EKF node (Odom frame) -->
  <node pkg="robot_localization" type="ekf_localization_node" name="ekf_local"
        clear_params="true" output="screen">
    <remap from="/odometry/filtered" to="/odometry/filtered_map"/>
  </node>

      <!-- First RTK node -->
  <node pkg="gem_control" type="get_first_RTK.py" name="first_RTK" args="$(find gem_control)/cfg" output="screen">
    <remap from="/piksi_receiver/navsatfix_best_fix" to="/gps/fix"/>
  </node>
  
  <!-- Launch Navsat_transform node -->
  <node pkg="robot_localization" type="navsat_transform_node" name="navsat_transform" respawn="true" clear_params="true">
    <remap from="/gps/fix" to="/gps/fix"/>
    <remap from="/odometry/filtered" to="/odometry/filtered_map"/>
    <rosparam command="load" file="$(find gem_control)/cfg/datum.yaml" />
  </node>


</launch>